﻿@{
    ViewData["Title"] = "Trang chủ";
}

<div class="container mt-5">
    <div class="jumbotron bg-light rounded p-5">
        <h1 class="display-4 text-center mb-4">Hệ thống quản lý sinh viên</h1>
        @if (User.Identity.IsAuthenticated)
        {
            <div class="text-center mb-3">
                <span class="lead">Xin chào, @User.Identity.Name!</span>
                <a href="@Url.Action("Logout", "Login")" class="btn btn-danger ms-3">
                    <i class="bi bi-box-arrow-right me-2"></i> Đăng xuất
                </a>
            </div>
        }
        <div class="row justify-content-center">
            <div class="col-md-3 mb-4">
                <a href="@Url.Action("Profile", "Student")" class="menu-card">
                    <img src="~/images/student_info.png" alt="Thông tin sinh viên">
                    <p class="menu-text">Thông tin sinh viên</p>
                </a>
            </div>

            <div class="col-md-3 mb-4">
                <a href="@Url.Action("Index", "Course")" class="menu-card">
                    <img src="~/images/register.png" alt="Đăng ký học phần">
                    <p class="menu-text">Đăng ký học phần</p>
                </a>
            </div>

            <div class="col-md-3 mb-4">
                <a href="@Url.Action("Index", "Grade")" class="menu-card">
                    <img src="~/images/study_result.png" alt="Kết quả học tập">
                    <p class="menu-text">Kết quả học tập</p>
                </a>
            </div>

            <div class="col-md-3 mb-4">
                <a href="@Url.Action("Timetable", "Student")" class="menu-card">
                    <img src="~/images/timetable.png" alt="Thời khóa biểu">
                    <p class="menu-text">Thời khóa biểu</p>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Chatbot đặt ở ngoài container -->
<script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>

<df-messenger
    intent="WELCOME"
    chat-title="Hỗ trợ sinh viên"
    agent-id="0dc2a449-ce25-42cc-94ac-63be5d4e2e19"
    language-code="vi"
    chat-icon="https://cdn-icons-png.flaticon.com/512/4712/4712109.png">
</df-messenger>

<script>
    window.addEventListener('dfMessengerLoaded', function () {
        const dfMessenger = document.querySelector('df-messenger');
        const shadowRoot = dfMessenger.shadowRoot;

        // Ẩn chatbot khi mới load trang
        const messengerContainer = shadowRoot.querySelector('df-messenger-chat');
        messengerContainer.style.display = 'none';

        // Khi người dùng nhấn vào nút chatbot, hiển thị chatbot
        dfMessenger.addEventListener('click', function() {
            messengerContainer.style.display = 'block'; // Hiển thị chatbot
            const messengerChat = messengerContainer.shadowRoot.querySelector('.chat-wrapper');
            messengerChat.style.width = '300px';  // Kích thước đầy đủ khi nhấn
            messengerChat.style.height = '370px'; // Kích thước đầy đủ khi nhấn
        });
    });
</script>


<style>
    df-messenger {
        --df-messenger-button-titlebar-color: #3498db; /* Màu thanh tiêu đề */
        --df-messenger-chat-background-color: #ffffff; /* Nền chat */
        --df-messenger-font-color: #333333; /* Màu chữ */
        --df-messenger-send-icon: #3498db; /* Icon gửi */
        --df-messenger-bot-message: #eef4fb; /* Màu tin nhắn bot */
        --df-messenger-user-message: #cce5ff; /* Màu tin nhắn người */
    }
    
    .jumbotron {
        background-color: #f8f9fa;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .menu-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: #333;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        background-color: #fff;
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        height: 150px;
    }

    .menu-icon {
        font-size: 3rem;
        margin-bottom: 10px;
        color: #007bff;
    }

    .menu-text {
        font-weight: bold;
        text-align: center;
        margin-bottom: 0;
    }

    .menu-card:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        background-color: #e9ecef;
    }

    .btn-danger {
        border-radius: 5px;
    }
</style>
